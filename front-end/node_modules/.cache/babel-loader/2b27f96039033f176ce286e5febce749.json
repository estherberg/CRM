{"ast":null,"code":"import _regeneratorRuntime from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _createForOfIteratorHelper from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\nimport _asyncToGenerator from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _toConsumableArray from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\esthe\\\\OneDrive\\\\Desktop\\\\Projet Code\\\\Ouieqare-MERN - Copie\\\\front-end\\\\src\\\\views\\\\examples\\\\Clients.js\",\n    _s = $RefreshSig$();\n\nimport { useHistory } from \"react-router-dom\";\nimport React, { useState, useEffect } from \"react\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, CardBody, Card, CardHeader, Container, Row } from \"reactstrap\";\nimport { useDropzone } from 'react-dropzone';\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport Header from \"components/Headers/Header.js\";\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nvar formatDate = function formatDate(isoString) {\n  if (!isoString) return '';\n  var date = new Date(isoString);\n  return date.toLocaleDateString('fr-FR'); // ou 'en-US' selon le format local que vous préférez\n};\n\nvar Tables = function Tables() {\n  _s();\n\n  var history = useHistory();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clients = _useState2[0],\n      setClients = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      totalClients = _useState4[0],\n      setTotalClients = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      modal = _useState6[0],\n      setModal = _useState6[1];\n\n  var _useState7 = useState(false),\n      _useState8 = _slicedToArray(_useState7, 2),\n      isUploading = _useState8[0],\n      setIsUploading = _useState8[1];\n\n  var _useState9 = useState(false),\n      _useState10 = _slicedToArray(_useState9, 2),\n      uploadSuccess = _useState10[0],\n      setUploadSuccess = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      _useState12 = _slicedToArray(_useState11, 2),\n      uploadError = _useState12[0],\n      setUploadError = _useState12[1];\n\n  var _useState13 = useState(null),\n      _useState14 = _slicedToArray(_useState13, 2),\n      selectedFile = _useState14[0],\n      setSelectedFile = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      selected = _useState16[0],\n      setSelected = _useState16[1];\n\n  var toggleModal = function toggleModal() {\n    setModal(!modal);\n\n    if (!modal) {\n      if (!isUploading && !uploadSuccess) {\n        setSelectedFile(null);\n        setUploadError(\"\");\n      }\n    }\n  };\n\n  var handleOnSelect = function handleOnSelect(row, isSelect) {\n    console.log(\"Select \".concat(isSelect ? 'on' : 'off', \" for row id \").concat(row._id));\n\n    if (isSelect) {\n      setSelected(function (prevSelected) {\n        var newSelected = [].concat(_toConsumableArray(prevSelected), [row._id]);\n        console.log('New selected after add:', newSelected);\n        return newSelected;\n      });\n    } else {\n      setSelected(function (prevSelected) {\n        var newSelected = prevSelected.filter(function (x) {\n          return x !== row._id;\n        });\n        console.log('New selected after remove:', newSelected);\n        return newSelected;\n      });\n    }\n  };\n\n  var handleOnSelectAll = function handleOnSelectAll(isSelect, rows) {\n    console.log(\"Select all \".concat(isSelect ? 'on' : 'off'));\n\n    if (isSelect) {\n      var idsToSelect = rows.map(function (r) {\n        return r._id;\n      });\n      console.log('Selecting all ids:', idsToSelect);\n      setSelected(idsToSelect);\n    } else {\n      setSelected([]);\n    }\n  };\n\n  var selectAllRenderer = function selectAllRenderer(_ref) {\n    var mode = _ref.mode,\n        checked = _ref.checked,\n        indeterminate = _ref.indeterminate;\n    return /*#__PURE__*/React.createElement(\"input\", {\n      type: mode,\n      checked: checked,\n      ref: function ref(input) {\n        if (input) input.indeterminate = indeterminate;\n      } // onChange={e => {\n      //   if (e.target.checked) {\n      //     const idsToSelect = clients.map(client => client._id);  // Assurez-vous que cette ligne utilise la bonne clé\n      //     setSelected(idsToSelect);\n      //   } else {\n      //     setSelected([]);\n      //   }\n      // }}\n      ,\n      onChange: function onChange(e) {\n        handleOnSelectAll(e.target.checked, clients); // Appelez handleOnSelectAll avec le bon contexte\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }\n    });\n  };\n\n  var handleDeleteSelected = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _iterator, _step, _loop, newClients;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!window.confirm(\"Êtes-vous sûr de vouloir supprimer les clients sélectionnés ?\")) {\n                _context2.next = 20;\n                break;\n              }\n\n              _iterator = _createForOfIteratorHelper(selected);\n              _context2.prev = 2;\n              _loop = /*#__PURE__*/_regeneratorRuntime.mark(function _loop() {\n                var clientId;\n                return _regeneratorRuntime.wrap(function _loop$(_context) {\n                  while (1) {\n                    switch (_context.prev = _context.next) {\n                      case 0:\n                        clientId = _step.value;\n                        _context.next = 3;\n                        return fetch(\"http://localhost:5100/api/clients/\".concat(clientId), {\n                          method: 'DELETE',\n                          headers: {\n                            'Authorization': \"Bearer \".concat(localStorage.getItem('token').trim().replace('JWT ', ''))\n                          }\n                        }).then(function (response) {\n                          if (!response.ok) {\n                            throw new Error(\"Failed to delete client \".concat(clientId, \", status: \").concat(response.status));\n                          }\n\n                          return response.json();\n                        }).then(function (data) {\n                          if (!data.success) {\n                            throw new Error(data.message);\n                          }\n\n                          toast.success(\"Client \".concat(clientId, \" supprim\\xE9 avec succ\\xE8s!\"));\n                        }).catch(function (error) {\n                          console.error('Error:', error);\n                          toast.error(\"Error deleting client \".concat(clientId, \": \").concat(error.message));\n                        });\n\n                      case 3:\n                      case \"end\":\n                        return _context.stop();\n                    }\n                  }\n                }, _loop);\n              });\n\n              _iterator.s();\n\n            case 5:\n              if ((_step = _iterator.n()).done) {\n                _context2.next = 9;\n                break;\n              }\n\n              return _context2.delegateYield(_loop(), \"t0\", 7);\n\n            case 7:\n              _context2.next = 5;\n              break;\n\n            case 9:\n              _context2.next = 14;\n              break;\n\n            case 11:\n              _context2.prev = 11;\n              _context2.t1 = _context2[\"catch\"](2);\n\n              _iterator.e(_context2.t1);\n\n            case 14:\n              _context2.prev = 14;\n\n              _iterator.f();\n\n              return _context2.finish(14);\n\n            case 17:\n              // Mise à jour de l'état après la suppression de tous les clients sélectionnés\n              newClients = clients.filter(function (client) {\n                return !selected.includes(client._id);\n              });\n              setClients(newClients);\n              setSelected([]);\n\n            case 20:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee, null, [[2, 11, 14, 17]]);\n    }));\n\n    return function handleDeleteSelected() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var deleteButton = selected.length > 0 ? /*#__PURE__*/React.createElement(Button, {\n    color: \"danger\",\n    onClick: handleDeleteSelected,\n    style: {\n      marginLeft: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 5\n    }\n  }, \"Supprimer la s\\xE9lection\") : null;\n  var selectRow = {\n    mode: 'checkbox',\n    clickToSelect: true,\n    selected: selected,\n    onSelect: handleOnSelect,\n    onSelectAll: handleOnSelectAll,\n    selectionHeaderRenderer: selectAllRenderer,\n    style: {\n      backgroundColor: '#c8e6c9'\n    }\n  };\n\n  var fetchClients = function fetchClients(setClients) {\n    var token = localStorage.getItem('token');\n\n    if (!token) {\n      console.error('Token not found in localStorage');\n      return;\n    }\n\n    var cleanToken = token.trim();\n    var formattedToken = cleanToken.replace('JWT ', '');\n    console.log(\"Formatted Token from localStorage:\", formattedToken);\n    fetch('http://localhost:5100/api/clients', {\n      headers: {\n        'Authorization': \"Bearer \".concat(formattedToken)\n      }\n    }).then(function (response) {\n      if (!response.ok) {\n        throw new Error(\"HTTP status \".concat(response.status));\n      }\n\n      return response.json();\n    }).then(function (data) {\n      console.log('Clients fetched:', data);\n      setClients(data);\n      setTotalClients(data.length);\n    }).catch(function (err) {\n      console.error('Error fetching clients:', err.message);\n    });\n  };\n\n  var handleAddClient = function handleAddClient() {\n    console.log('Redirection to /admin/nouveauClient');\n    history.push('/admin/nouveauClient');\n  };\n\n  var columns = [{\n    dataField: \"_id\",\n    text: \"ID\",\n    hidden: true\n  }, {\n    dataField: \"nom\",\n    text: \"Nom\",\n    sort: true\n  }, // Permet le tri sur la colonne \"Nom\"\n  {\n    dataField: \"prenom\",\n    text: \"Prénom\",\n    sort: true\n  }, // Permet le tri sur la colonne \"Prénom\"\n  {\n    dataField: \"email\",\n    text: \"Email\",\n    sort: true\n  }, // Permet le tri sur la colonne \"Email\"\n  {\n    dataField: \"telephonePortable\",\n    text: \"Téléphone Portable\",\n    sort: true\n  }, // Permet le tri sur la colonne \"Téléphone Portable\"\n  {\n    dataField: \"ville\",\n    text: \"Ville\",\n    sort: true\n  }, // Permet le tri sur la colonne \"Ville\"\n  {\n    dataField: \"dateNaissance\",\n    text: \"Date de Naissance\",\n    formatter: function formatter(cellContent, row) {\n      return formatDate(row.dateNaissance);\n    },\n    sort: true // Permet le tri sur la colonne \"Date de Naissance\"\n\n  }, {\n    dataField: 'actions',\n    text: 'Actions',\n    formatter: function formatter(cell, row) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        color: \"primary\",\n        size: \"sm\",\n        onClick: function onClick() {\n          return handleEditClient(row);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-pencil-alt\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 13\n        }\n      })), ' ', /*#__PURE__*/React.createElement(Button, {\n        color: \"danger\",\n        size: \"sm\",\n        onClick: function onClick() {\n          return handleDeleteClient(row._id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"i\", {\n        className: \"fas fa-trash\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 13\n        }\n      })));\n    }\n  }];\n\n  var handleEditClient = function handleEditClient(client) {\n    history.push({\n      pathname: '/admin/nouveauClient',\n      state: {\n        client: client\n      }\n    });\n  };\n\n  var handleDeleteClient = function handleDeleteClient(clientId) {\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer ce client ?\")) {\n      fetch(\"http://localhost:5100/api/clients/\".concat(clientId), {\n        method: 'DELETE',\n        headers: {\n          'Authorization': \"Bearer \".concat(localStorage.getItem('token').trim().replace('JWT ', ''))\n        }\n      }).then(function (response) {\n        if (!response.ok) {\n          throw new Error(\"Failed to delete client, status: \".concat(response.status));\n        }\n\n        return response.json();\n      }).then(function (data) {\n        if (data.success) {\n          // Mettre à jour l'état immédiatement pour refléter la suppression\n          var newClients = clients.filter(function (client) {\n            return client._id !== clientId;\n          });\n          setSelected(selected.filter(function (id) {\n            return id !== clientId;\n          })); // Nettoyer aussi les sélections\n\n          setTotalClients(function (prevTotal) {\n            return prevTotal - 1;\n          });\n          toast.success(\"Client supprimé avec succès!\");\n          setClients(newClients);\n          console.log(\"Clients after deletion\", newClients);\n        } else {\n          throw new Error(data.message);\n        }\n      }).catch(function (error) {\n        console.error('Error:', error);\n        toast.error(\"Error: \".concat(error.message));\n      });\n    }\n  };\n\n  var handleFileUpload = function handleFileUpload() {\n    if (!selectedFile) {\n      toast.warn(\"No file selected for upload.\");\n      return;\n    }\n\n    setIsUploading(true);\n    var formData = new FormData();\n    formData.append('file', selectedFile);\n    fetch('http://localhost:5100/api/clients/import', {\n      method: 'POST',\n      headers: {\n        'Authorization': \"Bearer \".concat(localStorage.getItem('token').trim().replace('JWT ', ''))\n      },\n      body: formData\n    }).then(function (response) {\n      if (!response.ok) {\n        throw new Error('Failed to upload file');\n      }\n\n      return response.json();\n    }).then(function (data) {\n      setUploadSuccess(true);\n      console.log(\"Import success:\", data);\n      fetchClients(setClients);\n      setIsUploading(false);\n      setSelectedFile(null);\n      toast.success(\"Fichier importé avec succès!\");\n      toggleModal(); // Ferme le modal après l'importation réussie\n    }).catch(function (err) {\n      console.error(\"Import error:\", err);\n      setIsUploading(false);\n      setUploadError(\"Error during import: \" + err.message);\n      toast.error(\"Error during import: \" + err.message);\n    });\n    setUploadSuccess(false);\n  };\n\n  var pagination = paginationFactory({\n    page: 1,\n    alwaysShowAllBtns: true,\n    withFirstAndLast: false,\n    sizePerPageRenderer: function sizePerPageRenderer(_ref3) {\n      var options = _ref3.options,\n          currSizePerPage = _ref3.currSizePerPage,\n          onSizePerPageChange = _ref3.onSizePerPageChange;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"dataTables_length\",\n        id: \"datatable-basic_length\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 9\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"select\", {\n        name: \"datatable-basic_length\",\n        \"aria-controls\": \"datatable-basic\",\n        className: \"form-control form-control-sm\",\n        onChange: function onChange(e) {\n          return onSizePerPageChange(e.target.value);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"option\", {\n        value: \"10\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 15\n        }\n      }, \"10\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"25\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 15\n        }\n      }, \"25\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"50\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 15\n        }\n      }, \"50\"), /*#__PURE__*/React.createElement(\"option\", {\n        value: \"100\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }\n      }, \"100\")), \" \"));\n    }\n  });\n  var SearchBar = Search.SearchBar;\n  useEffect(function () {\n    fetchClients(setClients);\n  }, []);\n\n  var _useDropzone = useDropzone({\n    onDrop: function onDrop(acceptedFiles) {\n      console.log(acceptedFiles);\n      setSelectedFile(acceptedFiles[0]);\n      setUploadSuccess(true);\n      setUploadError(\"\"); //toast.info(\"File selected for upload.\");\n    }\n  }),\n      getRootProps = _useDropzone.getRootProps,\n      getInputProps = _useDropzone.getInputProps,\n      isDragActive = _useDropzone.isDragActive;\n\n  var sendEmailsToSelected = function sendEmailsToSelected() {\n    var selectedClients = clients.filter(function (client) {\n      return selected.includes(client.id);\n    });\n    console.log(\"Sending emails to:\", selectedClients.map(function (c) {\n      return c.email;\n    })); // Logique pour envoyer des emails\n  };\n\n  var handleSelectAllClick = function handleSelectAllClick() {\n    if (selected.length < clients.length) {\n      setSelected(clients.map(function (x) {\n        return x.id;\n      })); // Sélectionner tous les ID\n    } else {\n      setSelected([]); // Désélectionner tous\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Header, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-left\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnFocusLoss: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(Container, {\n    className: \"mt--7\",\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"shadow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-0 d-flex align-items-center justify-content-between\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mb-0\",\n    style: {\n      paddingBottom: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 19\n    }\n  }, \"Clients (Total : \", totalClients, \")\")), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleAddClient,\n    style: {\n      marginRight: '10px'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 19\n    }\n  }, \"Ajouter Client\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"info\",\n    onClick: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 19\n    }\n  }, \"Importer Clients\"))), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(ToolkitProvider, {\n    keyField: \"id\",\n    data: clients,\n    columns: columns,\n    search: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 15\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 5\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"row mb-2\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 9\n      }\n    }, deleteButton), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-6 text-right\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, Object.assign({}, props.searchProps, {\n      className: \"form-control-sm\",\n      placeholder: \"Rechercher\",\n      style: {\n        border: '1px solid black',\n        maxWidth: '250px'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      style: {\n        overflowX: 'auto'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({}, props.baseProps, {\n      keyField: \"_id\",\n      bootstrap4: true,\n      pagination: pagination,\n      data: clients,\n      columns: columns,\n      selectRow: selectRow,\n      bordered: false,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }\n    }))));\n  })))))), /*#__PURE__*/React.createElement(Modal, {\n    isOpen: modal,\n    toggle: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(ModalHeader, {\n    toggle: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 419,\n      columnNumber: 9\n    }\n  }, \"Importer des fichiers\"), /*#__PURE__*/React.createElement(ModalBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", Object.assign({}, getRootProps({\n    className: 'dropzone'\n  }), {\n    style: {\n      border: '2px dashed #007bff',\n      padding: '20px',\n      textAlign: 'center'\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 421,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", Object.assign({}, getInputProps(), {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-file-upload fa-2x\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 13\n    }\n  }, \"Formats support\\xE9s : .csv, .xlsx\"), isDragActive ? /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 426,\n      columnNumber: 15\n    }\n  }, \"Rel\\xE2chez le fichier ici...\") : /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 15\n    }\n  }, \"Glissez-d\\xE9posez des fichiers ici, ou cliquez pour s\\xE9lectionner des fichiers\"), isUploading && /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 29\n    }\n  }, \"Chargement...\"), uploadSuccess && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-success\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 431,\n      columnNumber: 31\n    }\n  }, \"Fichier import\\xE9 avec succ\\xE8s!\"), uploadError && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"alert alert-danger\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 29\n    }\n  }, uploadError))), /*#__PURE__*/React.createElement(ModalFooter, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    color: \"primary\",\n    onClick: handleFileUpload,\n    disabled: !selectedFile,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 11\n    }\n  }, \"OK\"), /*#__PURE__*/React.createElement(Button, {\n    color: \"secondary\",\n    onClick: toggleModal,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 11\n    }\n  }, \"Fermer\"))));\n};\n\n_s(Tables, \"+ZIoUcrQ2x+xyGBYFOvRT/9Cor8=\", false, function () {\n  return [useHistory, useDropzone];\n});\n\n_c = Tables;\nexport default Tables;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tables\");","map":{"version":3,"sources":["C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/src/views/examples/Clients.js"],"names":["useHistory","React","useState","useEffect","ToastContainer","toast","Modal","ModalHeader","ModalBody","ModalFooter","Button","CardBody","Card","CardHeader","Container","Row","useDropzone","BootstrapTable","paginationFactory","ToolkitProvider","Search","Header","formatDate","isoString","date","Date","toLocaleDateString","Tables","history","clients","setClients","totalClients","setTotalClients","modal","setModal","isUploading","setIsUploading","uploadSuccess","setUploadSuccess","uploadError","setUploadError","selectedFile","setSelectedFile","selected","setSelected","toggleModal","handleOnSelect","row","isSelect","console","log","_id","prevSelected","newSelected","filter","x","handleOnSelectAll","rows","idsToSelect","map","r","selectAllRenderer","mode","checked","indeterminate","input","e","target","handleDeleteSelected","window","confirm","clientId","fetch","method","headers","localStorage","getItem","trim","replace","then","response","ok","Error","status","json","data","success","message","catch","error","newClients","client","includes","deleteButton","length","marginLeft","selectRow","clickToSelect","onSelect","onSelectAll","selectionHeaderRenderer","style","backgroundColor","fetchClients","token","cleanToken","formattedToken","err","handleAddClient","push","columns","dataField","text","hidden","sort","formatter","cellContent","dateNaissance","cell","handleEditClient","handleDeleteClient","pathname","state","id","prevTotal","handleFileUpload","warn","formData","FormData","append","body","pagination","page","alwaysShowAllBtns","withFirstAndLast","sizePerPageRenderer","options","currSizePerPage","onSizePerPageChange","value","SearchBar","onDrop","acceptedFiles","getRootProps","getInputProps","isDragActive","sendEmailsToSelected","selectedClients","c","email","handleSelectAllClick","paddingBottom","marginRight","props","searchProps","border","maxWidth","overflowX","baseProps","className","padding","textAlign"],"mappings":"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","sourcesContent":["import { useHistory } from \"react-router-dom\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport {\r\n  Modal, ModalHeader, ModalBody, ModalFooter,\r\n  Button,\r\n  CardBody,\r\n  Card,\r\n  CardHeader,\r\n  Container,\r\n  Row,\r\n} from \"reactstrap\";\r\nimport { useDropzone } from 'react-dropzone';\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\r\nimport Header from \"components/Headers/Header.js\";\r\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\r\n\r\nconst formatDate = (isoString) => {\r\n  if (!isoString) return '';\r\n  const date = new Date(isoString);\r\n  return date.toLocaleDateString('fr-FR');  // ou 'en-US' selon le format local que vous préférez\r\n}\r\n\r\nconst Tables = () => {\r\n  const history = useHistory();\r\n  const [clients, setClients] = useState([]);\r\n  const [totalClients, setTotalClients] = useState(0);\r\n  const [modal, setModal] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadSuccess, setUploadSuccess] = useState(false);\r\n  const [uploadError, setUploadError] = useState(\"\");\r\n  const [selectedFile, setSelectedFile] = useState(null);\r\n  const [selected, setSelected] = useState([]);\r\n\r\n  const toggleModal = () => {\r\n    setModal(!modal);\r\n    if (!modal) {\r\n      if (!isUploading && !uploadSuccess) {\r\n        setSelectedFile(null);\r\n        setUploadError(\"\");\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleOnSelect = (row, isSelect) => {\r\n    console.log(`Select ${isSelect ? 'on' : 'off'} for row id ${row._id}`);\r\n    if (isSelect) {\r\n      setSelected(prevSelected => {\r\n        const newSelected = [...prevSelected, row._id];\r\n        console.log('New selected after add:', newSelected);\r\n        return newSelected;\r\n      });\r\n    } else {\r\n      setSelected(prevSelected => {\r\n        const newSelected = prevSelected.filter(x => x !== row._id);\r\n        console.log('New selected after remove:', newSelected);\r\n        return newSelected;\r\n      });\r\n    }\r\n  };\r\n  \r\n  const handleOnSelectAll = (isSelect, rows) => {\r\n    console.log(`Select all ${isSelect ? 'on' : 'off'}`);\r\n    if (isSelect) {\r\n      const idsToSelect = rows.map(r => r._id);\r\n      console.log('Selecting all ids:', idsToSelect);\r\n      setSelected(idsToSelect);\r\n    } else {\r\n      setSelected([]);\r\n    }\r\n  };\r\n  \r\n  \r\n  const selectAllRenderer = ({ mode, checked, indeterminate }) => (\r\n    <input\r\n      type={mode}\r\n      checked={checked}\r\n      ref={input => {\r\n        if (input) input.indeterminate = indeterminate;\r\n      }}\r\n      // onChange={e => {\r\n      //   if (e.target.checked) {\r\n      //     const idsToSelect = clients.map(client => client._id);  // Assurez-vous que cette ligne utilise la bonne clé\r\n      //     setSelected(idsToSelect);\r\n      //   } else {\r\n      //     setSelected([]);\r\n      //   }\r\n      // }}\r\n      onChange={e => {\r\n        handleOnSelectAll(e.target.checked, clients);  // Appelez handleOnSelectAll avec le bon contexte\r\n      }}\r\n    />\r\n  );\r\n  \r\n  const handleDeleteSelected = async () => {\r\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer les clients sélectionnés ?\")) {\r\n      for (const clientId of selected) {\r\n        await fetch(`http://localhost:5100/api/clients/${clientId}`, {\r\n          method: 'DELETE',\r\n          headers: {\r\n            'Authorization': `Bearer ${localStorage.getItem('token').trim().replace('JWT ', '')}`\r\n          }\r\n        })\r\n        .then(response => {\r\n          if (!response.ok) {\r\n            throw new Error(`Failed to delete client ${clientId}, status: ${response.status}`);\r\n          }\r\n          return response.json();\r\n        })\r\n        .then(data => {\r\n          if (!data.success) {\r\n            throw new Error(data.message);\r\n          }\r\n          toast.success(`Client ${clientId} supprimé avec succès!`);\r\n        })\r\n        .catch(error => {\r\n          console.error('Error:', error);\r\n          toast.error(`Error deleting client ${clientId}: ${error.message}`);\r\n        });\r\n      }\r\n      // Mise à jour de l'état après la suppression de tous les clients sélectionnés\r\n      const newClients = clients.filter(client => !selected.includes(client._id));\r\n      setClients(newClients);\r\n      setSelected([]);\r\n    }\r\n  };\r\n  \r\n  \r\n  const deleteButton = selected.length > 0 ? (\r\n    <Button color=\"danger\" onClick={handleDeleteSelected} style={{ marginLeft: '10px' }}>\r\n      Supprimer la sélection\r\n    </Button>\r\n  ) : null;\r\n  \r\n  const selectRow = {\r\n    mode: 'checkbox',\r\n    clickToSelect: true,\r\n    selected: selected,\r\n    onSelect: handleOnSelect,\r\n    onSelectAll: handleOnSelectAll,\r\n    selectionHeaderRenderer: selectAllRenderer,\r\n    style: { backgroundColor: '#c8e6c9' }\r\n  };\r\n  \r\n\r\n  const fetchClients = (setClients) => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n      console.error('Token not found in localStorage');\r\n      return;\r\n    }\r\n\r\n    const cleanToken = token.trim();\r\n    const formattedToken = cleanToken.replace('JWT ', '');\r\n\r\n    console.log(\"Formatted Token from localStorage:\", formattedToken);\r\n\r\n    fetch('http://localhost:5100/api/clients', {\r\n      headers: {\r\n         'Authorization': `Bearer ${formattedToken}`\r\n      }\r\n    })\r\n    .then(response => {\r\n      if (!response.ok) {\r\n        throw new Error(`HTTP status ${response.status}`);\r\n      }\r\n      return response.json();\r\n    })\r\n    .then(data => {\r\n      console.log('Clients fetched:', data);\r\n      setClients(data);\r\n      setTotalClients(data.length);\r\n    })\r\n    .catch(err => {\r\n      console.error('Error fetching clients:', err.message);\r\n    });\r\n};\r\n\r\n  const handleAddClient = () => {\r\n    console.log('Redirection to /admin/nouveauClient');\r\n    history.push('/admin/nouveauClient');\r\n  };\r\n\r\n  const columns = [\r\n    { dataField: \"_id\", text: \"ID\", hidden: true },\r\n    { dataField: \"nom\", text: \"Nom\", sort: true },  // Permet le tri sur la colonne \"Nom\"\r\n    { dataField: \"prenom\", text: \"Prénom\", sort: true },  // Permet le tri sur la colonne \"Prénom\"\r\n    { dataField: \"email\", text: \"Email\", sort: true },  // Permet le tri sur la colonne \"Email\"\r\n    { dataField: \"telephonePortable\", text: \"Téléphone Portable\", sort: true },  // Permet le tri sur la colonne \"Téléphone Portable\"\r\n    { dataField: \"ville\", text: \"Ville\", sort: true },  // Permet le tri sur la colonne \"Ville\"\r\n    {\r\n      dataField: \"dateNaissance\",\r\n      text: \"Date de Naissance\",\r\n      formatter: (cellContent, row) => formatDate(row.dateNaissance),\r\n      sort: true  // Permet le tri sur la colonne \"Date de Naissance\"\r\n    },\r\n    {\r\n      dataField: 'actions',\r\n      text: 'Actions',\r\n      formatter: (cell, row) => (\r\n        <div>\r\n          <Button color=\"primary\" size=\"sm\" onClick={() => handleEditClient(row)}>\r\n            <i className=\"fas fa-pencil-alt\" />\r\n          </Button>\r\n          {' '}\r\n          <Button color=\"danger\" size=\"sm\" onClick={() => handleDeleteClient(row._id)}>\r\n            <i className=\"fas fa-trash\" />\r\n          </Button>\r\n        </div>\r\n      )\r\n    }\r\n  ];\r\n  \r\n\r\n  const handleEditClient = (client) => {\r\n    history.push({\r\n      pathname: '/admin/nouveauClient',\r\n      state: { client: client }\r\n    });\r\n  };\r\n\r\n\r\n  const handleDeleteClient = (clientId) => {\r\n    if (window.confirm(\"Êtes-vous sûr de vouloir supprimer ce client ?\")) {\r\n      fetch(`http://localhost:5100/api/clients/${clientId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          'Authorization': `Bearer ${localStorage.getItem('token').trim().replace('JWT ', '')}`\r\n        }\r\n      })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error(`Failed to delete client, status: ${response.status}`);\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        if (data.success) {\r\n          // Mettre à jour l'état immédiatement pour refléter la suppression\r\n          const newClients = clients.filter(client => client._id !== clientId);\r\n          \r\n          setSelected(selected.filter(id => id !== clientId)); // Nettoyer aussi les sélections\r\n          setTotalClients(prevTotal => prevTotal - 1);\r\n          toast.success(\"Client supprimé avec succès!\");\r\n          setClients(newClients);\r\n          console.log(\"Clients after deletion\", newClients);\r\n        } else {\r\n          throw new Error(data.message);\r\n        }\r\n      })\r\n      .catch(error => {\r\n        console.error('Error:', error);\r\n        toast.error(`Error: ${error.message}`);\r\n      });\r\n    }\r\n  };\r\n  \r\n  \r\n\r\n  const handleFileUpload = () => {\r\n    if (!selectedFile) {\r\n      toast.warn(\"No file selected for upload.\");\r\n      return;\r\n    }\r\n\r\n    setIsUploading(true);\r\n    const formData = new FormData();\r\n    formData.append('file', selectedFile);\r\n\r\n    fetch('http://localhost:5100/api/clients/import', {\r\n      method: 'POST',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token').trim().replace('JWT ', '')}`\r\n      },\r\n      body: formData\r\n    })\r\n      .then(response => {\r\n        if (!response.ok) {\r\n          throw new Error('Failed to upload file');\r\n        }\r\n        return response.json();\r\n      })\r\n      .then(data => {\r\n        setUploadSuccess(true);\r\n        console.log(\"Import success:\", data);\r\n        fetchClients(setClients);\r\n        setIsUploading(false);\r\n        \r\n        setSelectedFile(null);\r\n        toast.success(\"Fichier importé avec succès!\");\r\n        toggleModal(); // Ferme le modal après l'importation réussie\r\n      })\r\n      .catch(err => {\r\n        console.error(\"Import error:\", err);\r\n        setIsUploading(false);\r\n        setUploadError(\"Error during import: \" + err.message);\r\n        toast.error(\"Error during import: \" + err.message);\r\n      });\r\n      setUploadSuccess(false);\r\n  };\r\n\r\n  const pagination = paginationFactory({\r\n    page: 1,\r\n    alwaysShowAllBtns: true,\r\n    withFirstAndLast: false,\r\n    sizePerPageRenderer: ({ options, currSizePerPage, onSizePerPageChange }) => (\r\n      <div className=\"dataTables_length\" id=\"datatable-basic_length\">\r\n        <label>\r\n          {\" \"}\r\n          {\r\n            <select\r\n              name=\"datatable-basic_length\"\r\n              aria-controls=\"datatable-basic\"\r\n              className=\"form-control form-control-sm\"\r\n              onChange={e => onSizePerPageChange(e.target.value)}\r\n            >\r\n              <option value=\"10\">10</option>\r\n              <option value=\"25\">25</option>\r\n              <option value=\"50\">50</option>\r\n              <option value=\"100\">100</option>\r\n            </select>\r\n          }{\" \"}\r\n        </label>\r\n      </div>\r\n    )\r\n  });\r\n\r\n  const { SearchBar } = Search;\r\n  useEffect(() => {\r\n    fetchClients(setClients);\r\n  }, []);\r\n  \r\n  const { getRootProps, getInputProps, isDragActive } = useDropzone({\r\n    onDrop: acceptedFiles => {\r\n      console.log(acceptedFiles);\r\n      setSelectedFile(acceptedFiles[0]);\r\n      setUploadSuccess(true);\r\n      setUploadError(\"\");\r\n      //toast.info(\"File selected for upload.\");\r\n    }\r\n  });\r\n\r\n  const sendEmailsToSelected = () => {\r\n    const selectedClients = clients.filter(client => selected.includes(client.id));\r\n    console.log(\"Sending emails to:\", selectedClients.map(c => c.email));\r\n    // Logique pour envoyer des emails\r\n  };\r\n\r\n  const handleSelectAllClick = () => {\r\n    if (selected.length < clients.length) {\r\n      setSelected(clients.map(x => x.id)); // Sélectionner tous les ID\r\n    } else {\r\n      setSelected([]); // Désélectionner tous\r\n    }\r\n  };\r\n\r\n  \r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <ToastContainer position=\"bottom-left\" autoClose={5000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover />\r\n      <Container className=\"mt--7\" fluid>\r\n        <Row>\r\n          <div className=\"col\">\r\n            <Card className=\"shadow\">\r\n              <CardHeader className=\"border-0 d-flex align-items-center justify-content-between\">\r\n                <div>\r\n                  <h3 className=\"mb-0\" style={{ paddingBottom: '10px' }}>Clients (Total : {totalClients})</h3>\r\n                  {/* <Button color=\"info\" onClick={handleSelectAllClick}>\r\n  {selected.length === clients.length ? \"Désélectionner Tout\" : \"Sélectionner Tout\"}\r\n</Button> */}\r\n                </div>\r\n                <div>\r\n                  <Button color=\"primary\" onClick={handleAddClient} style={{ marginRight: '10px' }}>Ajouter Client</Button>\r\n                  <Button color=\"info\" onClick={toggleModal}>Importer Clients</Button>\r\n                  {/* <Button color=\"info\" onClick={sendEmailsToSelected}>Envoyer Mail</Button> */}\r\n                </div>\r\n              </CardHeader>\r\n              <CardBody>\r\n              <ToolkitProvider keyField=\"id\" data={clients} columns={columns} search>\r\n  {props => (\r\n    <div>\r\n      <div className=\"row mb-2\">\r\n        <div className=\"col-6\">\r\n        {deleteButton}\r\n          {/* Ici, vous pouvez remettre les boutons ou autres éléments comme avant */}\r\n        </div>\r\n        <div className=\"col-6 text-right\">\r\n          <SearchBar {...props.searchProps} className=\"form-control-sm\" placeholder=\"Rechercher\" style={{ border: '1px solid black', maxWidth: '250px' }} />\r\n        </div>\r\n      </div>\r\n      <div style={{ overflowX: 'auto' }}>\r\n        <BootstrapTable\r\n          {...props.baseProps}\r\n          keyField=\"_id\"\r\n          bootstrap4\r\n          pagination={pagination}\r\n          data={clients}\r\n          columns={columns}\r\n          selectRow={selectRow}\r\n          bordered={false}\r\n        />\r\n      </div>\r\n    </div>\r\n  )}\r\n</ToolkitProvider>\r\n\r\n              </CardBody>\r\n            </Card>\r\n          </div>\r\n        </Row>\r\n      </Container>\r\n      <Modal isOpen={modal} toggle={toggleModal}>\r\n        <ModalHeader toggle={toggleModal}>Importer des fichiers</ModalHeader>\r\n        <ModalBody>\r\n          <div {...getRootProps({ className: 'dropzone' })} style={{ border: '2px dashed #007bff', padding: '20px', textAlign: 'center' }}>\r\n            <input {...getInputProps()} />\r\n            <i className=\"fas fa-file-upload fa-2x\"></i>\r\n            <p>Formats supportés : .csv, .xlsx</p>\r\n            {isDragActive ? (\r\n              <p>Relâchez le fichier ici...</p>\r\n            ) : (\r\n              <p>Glissez-déposez des fichiers ici, ou cliquez pour sélectionner des fichiers</p>\r\n            )}\r\n            {isUploading && <div>Chargement...</div>}\r\n            {uploadSuccess && <div className=\"alert alert-success\">Fichier importé avec succès!</div>}\r\n            {uploadError && <div className=\"alert alert-danger\">{uploadError}</div>}\r\n          </div>\r\n        </ModalBody>\r\n        <ModalFooter>\r\n          <Button color=\"primary\" onClick={handleFileUpload} disabled={!selectedFile}>\r\n            OK\r\n          </Button>\r\n          <Button color=\"secondary\" onClick={toggleModal}>Fermer</Button>\r\n        </ModalFooter>\r\n      </Modal>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Tables;"]},"metadata":{},"sourceType":"module"}