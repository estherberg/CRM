{"ast":null,"code":"import _slicedToArray from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\esthe\\\\OneDrive\\\\Desktop\\\\Projet Code\\\\Ouieqare-MERN - Copie\\\\front-end\\\\src\\\\views\\\\examples\\\\Corbeille.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Button, Card, CardHeader, CardBody, Container, Row } from 'reactstrap';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport paginationFactory from 'react-bootstrap-table2-paginator';\nimport ToolkitProvider, { Search } from 'react-bootstrap-table2-toolkit';\nimport { useHistory } from \"react-router-dom\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nvar Corbeille = function Corbeille() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clients = _useState2[0],\n      setClients = _useState2[1];\n\n  var history = useHistory();\n  var SearchBar = Search.SearchBar;\n  useEffect(function () {\n    fetchDeletedClients();\n  }, []);\n\n  var fetchDeletedClients = function fetchDeletedClients() {\n    var token = localStorage.getItem('token');\n    fetch('http://localhost:5100/api/clients', {\n      headers: {\n        'Authorization': \"Bearer \".concat(token),\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setClients(data.filter(function (client) {\n        return client.isDeleted;\n      })); // Only deleted clients\n    }).catch(function (err) {\n      return console.error('Error fetching clients:', err);\n    });\n  }; // Définition des colonnes du tableau\n\n\n  var columns = [{\n    dataField: \"nom\",\n    text: \"Nom\"\n  }, {\n    dataField: \"prenom\",\n    text: \"Prénom\"\n  }, {\n    dataField: \"email\",\n    text: \"Email\"\n  }, {\n    dataField: \"actions\",\n    text: \"Actions\",\n    formatter: function formatter(cellContent, row) {\n      return /*#__PURE__*/React.createElement(Button, {\n        color: \"success\",\n        size: \"sm\",\n        onClick: function onClick() {\n          return restoreClient(row._id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 11\n        }\n      }, \"Restaurer\");\n    }\n  }];\n\n  var restoreClient = function restoreClient(clientId) {\n    fetch(\"http://localhost:5100/api/clients/restore/\".concat(clientId), {\n      method: 'PUT',\n      headers: {\n        'Authorization': \"Bearer \".concat(localStorage.getItem('token')),\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.success) {\n        toast.success(\"Client restored successfully!\");\n        fetchDeletedClients(); // Refresh the list\n      } else {\n        throw new Error(data.message);\n      }\n    }).catch(function (error) {\n      console.error('Error:', error);\n      toast.error(\"Error: \".concat(error.message));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt--7\",\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnFocusLoss: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"shadow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }, \"Corbeille\")), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ToolkitProvider, {\n    keyField: \"id\",\n    data: clients,\n    columns: columns,\n    search: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 15\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, Object.assign({}, props.searchProps, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({}, props.baseProps, {\n      bootstrap4: true,\n      pagination: paginationFactory(),\n      noDataIndication: \"Aucun client supprim\\xE9 trouv\\xE9\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 23\n      }\n    })));\n  }))))));\n};\n\n_s(Corbeille, \"3gJeX2i72KmJU5xvQ1V3VkT4eSk=\", false, function () {\n  return [useHistory];\n});\n\n_c = Corbeille;\nexport default Corbeille;\n\nvar _c;\n\n$RefreshReg$(_c, \"Corbeille\");","map":{"version":3,"sources":["C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/src/views/examples/Corbeille.js"],"names":["React","useState","useEffect","Button","Card","CardHeader","CardBody","Container","Row","BootstrapTable","paginationFactory","ToolkitProvider","Search","useHistory","ToastContainer","toast","Corbeille","clients","setClients","history","SearchBar","fetchDeletedClients","token","localStorage","getItem","fetch","headers","then","res","json","data","filter","client","isDeleted","catch","err","console","error","columns","dataField","text","formatter","cellContent","row","restoreClient","_id","clientId","method","response","success","Error","message","props","searchProps","baseProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Button, Card, CardHeader, CardBody, Container, Row } from 'reactstrap';\r\nimport BootstrapTable from 'react-bootstrap-table-next';\r\nimport paginationFactory from 'react-bootstrap-table2-paginator';\r\nimport ToolkitProvider, { Search } from 'react-bootstrap-table2-toolkit';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\n\r\nconst Corbeille = () => {\r\n  const [clients, setClients] = useState([]);\r\n  const history = useHistory();\r\n  const { SearchBar } = Search;\r\n\r\n  useEffect(() => {\r\n    fetchDeletedClients();\r\n  }, []);\r\n\r\n  const fetchDeletedClients = () => {\r\n    const token = localStorage.getItem('token');\r\n    fetch('http://localhost:5100/api/clients', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      setClients(data.filter(client => client.isDeleted));  // Only deleted clients\r\n    })\r\n    .catch(err => console.error('Error fetching clients:', err));\r\n  };\r\n  \r\n\r\n  // Définition des colonnes du tableau\r\n  const columns = [\r\n    { dataField: \"nom\", text: \"Nom\" },\r\n    { dataField: \"prenom\", text: \"Prénom\" },\r\n    { dataField: \"email\", text: \"Email\" },\r\n    {\r\n      dataField: \"actions\",\r\n      text: \"Actions\",\r\n      formatter: (cellContent, row) => {\r\n        return (\r\n          <Button color=\"success\" size=\"sm\" onClick={() => restoreClient(row._id)}>\r\n            Restaurer\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  ];\r\n\r\n  const restoreClient = (clientId) => {\r\n    fetch(`http://localhost:5100/api/clients/restore/${clientId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if (data.success) {\r\n        toast.success(\"Client restored successfully!\");\r\n        fetchDeletedClients();  // Refresh the list\r\n      } else {\r\n        throw new Error(data.message);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error('Error:', error);\r\n      toast.error(`Error: ${error.message}`);\r\n    });\r\n  };\r\n  \r\n\r\n  return (\r\n    <Container className=\"mt--7\" fluid>\r\n        <ToastContainer position=\"bottom-right\" autoClose={5000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover />\r\n      <Row>\r\n        <div className=\"col\">\r\n          <Card className=\"shadow\">\r\n            <CardHeader className=\"border-0\">\r\n              <h3 className=\"mb-0\">Corbeille</h3>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <ToolkitProvider\r\n                keyField=\"id\"\r\n                data={clients}\r\n                columns={columns}\r\n                search\r\n              >\r\n                {\r\n                  props => (\r\n                    <div>\r\n                      <SearchBar {...props.searchProps} />\r\n                      <BootstrapTable\r\n                        {...props.baseProps}\r\n                        bootstrap4\r\n                        pagination={paginationFactory()}\r\n                        noDataIndication=\"Aucun client supprimé trouvé\"\r\n                      />\r\n                    </div>\r\n                  )\r\n                }\r\n              </ToolkitProvider>\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Corbeille;\r\n"]},"metadata":{},"sourceType":"module"}