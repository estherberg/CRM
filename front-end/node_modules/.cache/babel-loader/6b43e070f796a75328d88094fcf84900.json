{"ast":null,"code":"import _slicedToArray from \"C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\esthe\\\\OneDrive\\\\Desktop\\\\Projet Code\\\\Ouieqare-MERN - Copie\\\\front-end\\\\src\\\\views\\\\examples\\\\Corbeille.js\",\n    _s = $RefreshSig$();\n\nimport { useHistory } from \"react-router-dom\";\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { Modal, ModalHeader, ModalBody, ModalFooter, Button, CardBody, Card, CardHeader, Container, Row } from \"reactstrap\";\nimport { useDropzone } from 'react-dropzone';\nimport BootstrapTable from \"react-bootstrap-table-next\";\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\nimport Header from \"components/Headers/Header.js\";\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\n\nvar Corbeille = function Corbeille() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      clients = _useState2[0],\n      setClients = _useState2[1];\n\n  var history = useHistory();\n  var SearchBar = Search.SearchBar;\n  useEffect(function () {\n    fetchDeletedClients();\n  }, []);\n\n  var fetchDeletedClients = function fetchDeletedClients() {\n    var token = localStorage.getItem('token');\n    fetch('http://localhost:5100/api/clients', {\n      headers: {\n        'Authorization': \"Bearer \".concat(token),\n        'Content-Type': 'application/json'\n      }\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      var deletedClients = data.filter(function (client) {\n        return client.isDeleted;\n      });\n      setClients(deletedClients);\n    }).catch(function (err) {\n      return console.error('Error fetching deleted clients:', err);\n    });\n  }; // Définition des colonnes du tableau\n\n\n  var columns = [{\n    dataField: \"nom\",\n    text: \"Nom\"\n  }, {\n    dataField: \"prenom\",\n    text: \"Prénom\"\n  }, {\n    dataField: \"email\",\n    text: \"Email\"\n  }, {\n    dataField: \"actions\",\n    text: \"Actions\",\n    formatter: function formatter(cellContent, row) {\n      return /*#__PURE__*/React.createElement(Button, {\n        color: \"success\",\n        size: \"sm\",\n        onClick: function onClick() {\n          return restoreClient(row._id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }\n      }, \"Restaurer\");\n    }\n  }];\n\n  var restoreClient = function restoreClient(clientId) {\n    fetch(\"http://localhost:5100/api/clients/restore/\".concat(clientId), {\n      method: 'PUT',\n      headers: {\n        'Authorization': \"Bearer \".concat(localStorage.getItem('token')),\n        'Content-Type': 'application/json'\n      }\n    }).then(function (response) {\n      return response.json();\n    }).then(function (data) {\n      if (data.success) {\n        toast.success(\"Client restored successfully!\");\n        fetchDeletedClients(); // Refresh the list\n      } else {\n        throw new Error(data.message);\n      }\n    }).catch(function (error) {\n      console.error('Error:', error);\n      toast.error(\"Error: \".concat(error.message));\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Container, {\n    className: \"mt--7\",\n    fluid: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(ToastContainer, {\n    position: \"bottom-right\",\n    autoClose: 5000,\n    hideProgressBar: false,\n    newestOnTop: false,\n    closeOnClick: true,\n    rtl: false,\n    pauseOnFocusLoss: true,\n    draggable: true,\n    pauseOnHover: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(Row, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    className: \"shadow\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(CardHeader, {\n    className: \"border-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"mb-0\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 15\n    }\n  }, \"Corbeille\")), /*#__PURE__*/React.createElement(CardBody, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ToolkitProvider, {\n    keyField: \"id\",\n    data: clients,\n    columns: columns,\n    search: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 15\n    }\n  }, function (props) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(SearchBar, Object.assign({}, props.searchProps, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(BootstrapTable, Object.assign({}, props.baseProps, {\n      bootstrap4: true,\n      pagination: paginationFactory(),\n      noDataIndication: \"Aucun client supprim\\xE9 trouv\\xE9\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 23\n      }\n    })));\n  }))))));\n};\n\n_s(Corbeille, \"3gJeX2i72KmJU5xvQ1V3VkT4eSk=\", false, function () {\n  return [useHistory];\n});\n\n_c = Corbeille;\nexport default Corbeille;\n\nvar _c;\n\n$RefreshReg$(_c, \"Corbeille\");","map":{"version":3,"sources":["C:/Users/esthe/OneDrive/Desktop/Projet Code/Ouieqare-MERN - Copie/front-end/src/views/examples/Corbeille.js"],"names":["useHistory","React","useState","useRef","useEffect","ToastContainer","toast","Modal","ModalHeader","ModalBody","ModalFooter","Button","CardBody","Card","CardHeader","Container","Row","useDropzone","BootstrapTable","paginationFactory","ToolkitProvider","Search","Header","Corbeille","clients","setClients","history","SearchBar","fetchDeletedClients","token","localStorage","getItem","fetch","headers","then","res","json","data","deletedClients","filter","client","isDeleted","catch","err","console","error","columns","dataField","text","formatter","cellContent","row","restoreClient","_id","clientId","method","response","success","Error","message","props","searchProps","baseProps"],"mappings":"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","sourcesContent":["import { useHistory } from \"react-router-dom\";\r\nimport React, { useState, useRef, useEffect } from \"react\";\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport {\r\n  Modal, ModalHeader, ModalBody, ModalFooter,\r\n  Button,\r\n  CardBody,\r\n  Card,\r\n  CardHeader,\r\n  Container,\r\n  Row,\r\n} from \"reactstrap\";\r\nimport { useDropzone } from 'react-dropzone';\r\nimport BootstrapTable from \"react-bootstrap-table-next\";\r\nimport paginationFactory from \"react-bootstrap-table2-paginator\";\r\nimport ToolkitProvider, { Search } from \"react-bootstrap-table2-toolkit\";\r\nimport Header from \"components/Headers/Header.js\";\r\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\r\n\r\n\r\nconst Corbeille = () => {\r\n  const [clients, setClients] = useState([]);\r\n  const history = useHistory();\r\n  const { SearchBar } = Search;\r\n\r\n  useEffect(() => {\r\n    fetchDeletedClients();\r\n  }, []);\r\n\r\n  const fetchDeletedClients = () => {\r\n    const token = localStorage.getItem('token');\r\n    fetch('http://localhost:5100/api/clients', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(res => res.json())\r\n    .then(data => {\r\n      const deletedClients = data.filter(client => client.isDeleted);\r\n      setClients(deletedClients);\r\n    })\r\n    .catch(err => console.error('Error fetching deleted clients:', err));\r\n  };\r\n  \r\n  \r\n\r\n  // Définition des colonnes du tableau\r\n  const columns = [\r\n    { dataField: \"nom\", text: \"Nom\" },\r\n    { dataField: \"prenom\", text: \"Prénom\" },\r\n    { dataField: \"email\", text: \"Email\" },\r\n    {\r\n      dataField: \"actions\",\r\n      text: \"Actions\",\r\n      formatter: (cellContent, row) => {\r\n        return (\r\n          <Button color=\"success\" size=\"sm\" onClick={() => restoreClient(row._id)}>\r\n            Restaurer\r\n          </Button>\r\n        );\r\n      }\r\n    }\r\n  ];\r\n\r\n  const restoreClient = (clientId) => {\r\n    fetch(`http://localhost:5100/api/clients/restore/${clientId}`, {\r\n      method: 'PUT',\r\n      headers: {\r\n        'Authorization': `Bearer ${localStorage.getItem('token')}`,\r\n        'Content-Type': 'application/json'\r\n      }\r\n    })\r\n    .then(response => response.json())\r\n    .then(data => {\r\n      if (data.success) {\r\n        toast.success(\"Client restored successfully!\");\r\n        fetchDeletedClients();  // Refresh the list\r\n      } else {\r\n        throw new Error(data.message);\r\n      }\r\n    })\r\n    .catch(error => {\r\n      console.error('Error:', error);\r\n      toast.error(`Error: ${error.message}`);\r\n    });\r\n  };\r\n  \r\n\r\n  return (\r\n    <Container className=\"mt--7\" fluid>\r\n        <ToastContainer position=\"bottom-right\" autoClose={5000} hideProgressBar={false} newestOnTop={false} closeOnClick rtl={false} pauseOnFocusLoss draggable pauseOnHover />\r\n      <Row>\r\n        <div className=\"col\">\r\n          <Card className=\"shadow\">\r\n            <CardHeader className=\"border-0\">\r\n              <h3 className=\"mb-0\">Corbeille</h3>\r\n            </CardHeader>\r\n            <CardBody>\r\n              <ToolkitProvider\r\n                keyField=\"id\"\r\n                data={clients}\r\n                columns={columns}\r\n                search\r\n              >\r\n                {\r\n                  props => (\r\n                    <div>\r\n                      <SearchBar {...props.searchProps} />\r\n                      <BootstrapTable\r\n                        {...props.baseProps}\r\n                        bootstrap4\r\n                        pagination={paginationFactory()}\r\n                        noDataIndication=\"Aucun client supprimé trouvé\"\r\n                      />\r\n                    </div>\r\n                  )\r\n                }\r\n              </ToolkitProvider>\r\n            </CardBody>\r\n          </Card>\r\n        </div>\r\n      </Row>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Corbeille;\r\n"]},"metadata":{},"sourceType":"module"}